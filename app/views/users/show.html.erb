<div class="container">
  <div class="row">
    <% if flash[:notice] %>
    <div>
      <p class="flashtop"><%= flash[:notice] %></p>
    </div>
    <% end %>

    <div class="col-xs-9">
      <h2>自分の投稿</h2>
      <table class="table">
        <thead>
          <tr>
            <th></th>
            <th>投稿内容</th>
            <th>投稿画像</th>
            <th colspan="3"></th>
          </tr>
        </thead>

        <tbody>
          <% @posts.each do |post| %>
          <tr>
            <td>
              <%= link_to user_path(post.user.id) do %>
              <%= attachment_image_tag post.user, :profile_image, :fill, 100, 100, class: "pull-left profile-thumb", fallback: "no_image.jpg" %>
              <% end %>
            </td>
            <td class="comment">
              <%= link_to post_path(post.id) do %>
              <%= post.main_comment %>
              <% end %>
            </td>
            <td>
              <%= attachment_image_tag post, :post_image, :fill, 100, 100, class: "pull-left profile-thumb" %>
            </td>
            <td>
            <% if post.favorited_by?(current_user) %>
            <div>
              <%= link_to post_favorites_path(post), method: :delete do %>
              <i class="glyphicon glyphicon-heart" style="color: red;"></i>
              <%= post.favorites.count %>
              <% end %>
            </div>
            <% else %>
            <div>
              <%= link_to post_favorites_path(post), method: :post do %>
              <i class="glyphicon glyphicon-heart-empty"></i>
              <%= post.favorites.count %>
              <% end %>
            </div>
            <% end %>
            </td>
            <td>
              <%= render 'posts/tag_list', tag_list: post.tag_list %>
            </td>
            <td>
              <div>
                コメント数: <%= post.post_comments.count %>
              </div>
            </td>
          </tr>
          <% end %>
        </tbody>
      </table>
    </div>
    <%= render 'posts/link', post: @post, user: @user %>
  </div>
</div>